<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>US Signal | On-Call Schedule</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="./ussignal.jpg" type="image/jpeg" />
  <link rel="stylesheet" href="style.css" />

  <!-- =========================
       PUBLIC UI ENHANCEMENTS
  ========================= -->
  <style>
 /* ===== PAY REQUEST BUTTON (US SIGNAL NAVY) ===== */
.pay-request-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 9px 16px;
  border-radius: 999px;
  background: linear-gradient(
    135deg,
    #0b2d5b,
    #123a6f
  );
  color: #ffffff;
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.2px;
  text-decoration: none;
  box-shadow:
    0 1px 2px rgba(0,0,0,.12),
    inset 0 0 0 1px rgba(255,255,255,.08);
  white-space: nowrap;
}
.pay-request-btn:hover {
  background: linear-gradient(135deg,#09254b,#0b2d5b);
}
.pay-request-btn:active { transform: translateY(1px); }
.pay-request-btn:focus-visible {
  outline: 3px solid rgba(11, 45, 91, 0.45);
  outline-offset: 2px;
}

/* ===== PUBLIC TABS ===== */
.tabs {
  display: flex;
  gap: 6px;
  padding: 10px;
  background: var(--card);
  border-radius: 12px;
  margin-bottom: 16px;
  overflow-x: auto;
}
.tabs button {
  flex: 1;
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 600;
  background: transparent;
  border: none;
  cursor: pointer;
}

/* ===== PANEL ANIMATION ===== */
.panel {
  display: none;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 200ms ease, transform 200ms ease;
}
.panel.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

/* ===== MOBILE OPTIMIZATION ===== */
@media (max-width: 768px) {
  .controls {
    flex-wrap: wrap;
    gap: 8px;
  }
  .pay-request-btn {
    width: 100%;
    justify-content: center;
  }
}

/* ===== LIVE CARD ===== */
.live-card {
  border-left: 6px solid #0ea5e9;
  background: linear-gradient(90deg, rgba(14,165,233,.08), transparent);
  padding: 14px;
  border-radius: 12px;
  margin-bottom: 16px;
}
.subtle { color: var(--muted); font-size: 13px; }

/* ===== US SIGNAL TAB STYLING FIX ===== */
:root {
  --us-navy: #0b2d5b;
  --us-navy-soft: #e6eef8;
}
.tabs button.tab {
  color: #374151;
  background: transparent;
  border-radius: 10px;
  font-weight: 600;
  transition: background 120ms ease, color 120ms ease;
}
.tabs button.tab:not(.active):hover {
  background: rgba(11, 45, 91, 0.08);
  color: var(--us-navy);
}
.tabs button.tab.active {
  background: var(--us-navy-soft);
  color: var(--us-navy);
  box-shadow: inset 0 -3px 0 var(--us-navy);
}
.tabs button.tab:focus-visible {
  outline: 3px solid rgba(11, 45, 91, 0.4);
  outline-offset: 2px;
}
  </style>
</head>

<body class="light">

<header class="topbar">
  <div class="brand">
    <img src="ussignal.jpg" alt="US Signal" class="logo" />
    <div>
      <div class="brand-title">US Signal</div>
      <div class="brand-sub">On-Call Schedule (Public)</div>
    </div>
  </div>

  <div class="controls">
    <button id="themeToggle" class="ghost" aria-label="Toggle light or dark mode">ðŸŒ™</button>

    <select id="deptFilter" aria-label="Filter by department">
      <option value="all">All Departments</option>
      <option value="enterprise_network">Enterprise Network</option>
      <option value="collaboration">Collaboration</option>
      <option value="system_storage">System & Storage</option>
    </select>

    <a
      href="https://forms.microsoft.com/Pages/ResponsePage.aspx?id=2kFZU3Lai0qDeJg6VL7DQmcodVUCw2tHgn0S1PzMbxpUQ0NXTlQ5TEtERzE0RzNHN0tNMjJNWThWRS4u"
      target="_blank"
      rel="noopener"
      class="pay-request-btn"
      aria-label="Submit US Signal On-Call Pay Request"
    >
      ðŸ’¼ On-Call Pay Request
    </a>
  </div>
</header>

<!-- =========================
     PUBLIC TABS
========================= -->
<nav class="tabs" role="tablist">
  <button class="tab active" data-tab="timelineTab" role="tab">Timeline</button>
  <button class="tab" data-tab="currentTab" role="tab">Whoâ€™s On Call Now</button>
  <button class="tab" data-tab="scheduleTab" role="tab">Full Schedule</button>
</nav>

<main class="container">

  <section id="timelineTab" class="panel active" role="tabpanel">
    <h2>Weekly Timeline</h2>
    <div id="timeline"></div>
  </section>

  <section id="currentTab" class="panel" role="tabpanel">
    <div class="panel-head">
      <h2>Whoâ€™s On Call Now</h2>
      <div class="subtle">Live Â· Read-only Â· Auto-updated</div>
    </div>
    <div id="currentOnCall" class="live-card"></div>
  </section>

  <section id="scheduleTab" class="panel" role="tabpanel">
    <h2>Full Schedule</h2>
    <div id="schedule"></div>
  </section>

</main>

<div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

<script>
  window.__APP_CTX__ = { public: true };
</script>
<script type="module" src="app.js"></script>

<!-- ===== TAB HASH + STICKY HOMEPAGE LOGIC ===== -->
<script>
(function () {
  const tabs = document.querySelectorAll(".tabs .tab");
  const panels = document.querySelectorAll(".panel");

  function activate(tabName, updateHash = true) {
    tabs.forEach(t => {
      t.classList.toggle("active", t.dataset.tab === tabName);
    });
    panels.forEach(p => {
      p.classList.toggle("active", p.id === tabName);
    });
    if (updateHash) {
      history.replaceState(null, "", "#" + tabName.replace("Tab", ""));
    }
  }

  tabs.forEach(btn => {
    btn.addEventListener("click", () => {
      activate(btn.dataset.tab);
    });
  });

  const hash = location.hash.replace("#", "");
  if (hash === "current") activate("currentTab", false);
  else if (hash === "schedule") activate("scheduleTab", false);
  else activate("timelineTab", false); // DEFAULT / STICKY HOMEPAGE
})();
</script>

</body>
</html>
