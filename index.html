<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>US Signal | On-Call Schedule</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="./ussignal.jpg" type="image/jpeg" />
  <link rel="stylesheet" href="style.css" />

  <!-- =========================
       PUBLIC UX ENHANCEMENTS
  ========================= -->
  <style>
    /* ---------- Mobile Optimizations ---------- */
    @media (max-width: 768px) {
      .topbar {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
      }

      .controls {
        flex-wrap: wrap;
        gap: 8px;
      }

      .tabs {
        overflow-x: auto;
        white-space: nowrap;
      }

      .schedule-card {
        padding: 12px;
      }

      .timeline-row-wrap {
        flex-direction: column;
        gap: 8px;
      }

      .timeline-left {
        width: 100%;
      }
    }

    /* ---------- Public Current On-Call ---------- */
    .public-current {
      border-left: 6px solid #0ea5e9;
      background: linear-gradient(90deg, rgba(14,165,233,.12), transparent);
      margin-bottom: 16px;
    }

    /* ---------- Header CTA ---------- */
    .pay-btn {
      text-decoration: none;
      font-weight: 600;
      white-space: nowrap;
    }
  </style>
</head>

<body class="light">

<header class="topbar">
  <div class="brand">
    <img src="ussignal.jpg" alt="US Signal" class="logo" />
    <div>
      <div class="brand-title">US Signal</div>
      <div class="brand-sub">On-Call Schedule (Public)</div>
    </div>
  </div>

  <div class="controls">
    <!-- Theme Toggle -->
    <button id="themeToggle" class="ghost" title="Toggle light/dark mode">ðŸŒ™</button>

    <!-- Department Filter -->
    <select id="deptFilter">
      <option value="all">All Departments</option>
      <option value="enterprise_network">Enterprise Network</option>
      <option value="collaboration">Collaboration</option>
      <option value="system_storage">System & Storage</option>
    </select>

    <!-- Pay Request -->
    <a
  href="https://forms.microsoft.com/Pages/ResponsePage.aspx?id=2kFZU3Lai0qDeJg6VL7DQmcodVUCw2tHgn0S1PzMbxpUQ0NXTlQ5TEtERzE0RzNHN0tNMjJNWThWRS4u"
  target="_blank"
  rel="noopener"
  class="pay-request-btn"
  aria-label="Submit On-Call Pay Request"
>
  ðŸ’¼ On-Call Pay Request
</a>

  </div>
</header>

<!-- =========================
     PUBLIC TABS
========================= -->
<nav class="tabs">
  <button class="tab active" data-tab="currentTab">Whoâ€™s On Call Now</button>
  <button class="tab" data-tab="scheduleTab">Schedule</button>
  <button class="tab" data-tab="timelineTab">Timeline</button>
</nav>

<main class="container">

  <!-- CURRENT ON-CALL -->
  <section id="currentTab" class="panel active">
    <div class="panel-head">
      <h2>Whoâ€™s On Call Now</h2>
      <div class="small subtle">Live Â· Read-only Â· Auto-updated</div>
    </div>
    <div id="currentOnCall" class="public-current"></div>
  </section>

  <!-- SCHEDULE -->
  <section id="scheduleTab" class="panel">
    <div class="panel-head">
      <h2>On-Call Schedule</h2>
      <div class="small subtle">Read-only Â· CST</div>
    </div>
    <div id="schedule"></div>
  </section>

  <!-- TIMELINE -->
  <section id="timelineTab" class="panel">
    <h2>Weekly Timeline</h2>
    <div id="timeline"></div>
  </section>

</main>

<div id="toast" class="toast hidden"></div>

<!-- =========================
     APP LOGIC
========================= -->
<script src="app.js"></script>
<script>
  /**
   * PUBLIC INITIALIZATION
   * - No authentication
   * - Viewer role only
   * - Uses /api/oncall (public)
   */
  initApp({
    admin: false,
    role: "viewer"
  });
</script>

</body>
</html>
